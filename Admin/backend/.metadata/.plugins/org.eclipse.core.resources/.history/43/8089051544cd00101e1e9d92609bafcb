package user.com.service.impl;

import user.com.dto.*;
import user.com.service.AdminApiClient;

import lombok.RequiredArgsConstructor;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;

import java.util.Arrays;
import java.util.List;

@Service
@RequiredArgsConstructor
public class AdminApiClientImpl implements AdminApiClient {

    private final RestTemplate restTemplate;

    @Value("${admin.base-url}")
    private String adminBase;

    @Override
    public List<CategoryDTO> getCategories() {
        return Arrays.asList(restTemplate.getForObject(
            adminBase + "/category/findAll_category", CategoryDTO[].class));
    }

    @Override
    public List<SubServiceDTO> getServices() {
        return Arrays.asList(restTemplate.getForObject(
            adminBase + "/subservice/findAll_subservice", SubServiceDTO[].class));
    }

    @Override
    public List<VenueDTO> getVenues() {
        return Arrays.asList(restTemplate.getForObject(
            adminBase + "/venue/findAll_venue", VenueDTO[].class));
    }

    @Override
    public List<SpotDTO> getSpots() {
        return Arrays.asList(restTemplate.getForObject(
            adminBase + "/spot/findAll_spot", SpotDTO[].class));
    }

    @Override
    public List<SlotDTO> getSlots() {
        return Arrays.asList(restTemplate.getForObject(
            adminBase + "/slot/findAll_slot", SlotDTO[].class));
    }
}
